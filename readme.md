# 06 SQL basics

## общее

Для работы мы будем использовать базу Northwind, исходный код которой
можно найти в материалах, в файле _instnwnd.sql_.

## 03 развёртывание базы и обновлений

Ваша задача &mdash; подготовить к выпуску несколько версий
проекта Northwind Extended, а точнее &mdash; базу данных проекта.

В рамках Northwind Extended предполагается выпустить следующие 3 версии:
*   Версия 1.0. Основана на оригинальной базе Northwind
*   Версия 1.1. Добавляет таблицу данных кредитных карт сотрудников:
    номер карты, дату истечения, имя card holder, ссылку на сотрудника, ...
*   Версия 1.3. Добавляет следующие минорные изменения относительно 1.1:
    *   Переименование `Region` в `Regions`
    *   Добавление в таблицу клиентов даты основания

Вся работа выполняется на SQL Server любой доступной редакции.

### 01 использование Alter Scripts

Создайте 2 SQL-скрипта, которые выполняют обновление базы по версиям:
*   1.0 &rarr; 1.1
*   1.1 &rarr; 1.3

При выполнении задания добейтесь того,
чтобы скрипты можно было накатывать многократно
(например, для случая ошибочного повторного обновления) без ошибок.

### 02 использование SSDT

Импортируйте исходную базу Northwind (из базы или скрипта _instnwnd.sql_)
в проект базы данных для Visual Studio.

Импортируйте только метаданные, данные переносить не надо!

Представьте 3 версии проекта на базе SSDT с изменениями, как описано выше.

Убедитесь, что при использовании SSDT вы можете обновить версии
как последовательно, так и с пропуском версии,
а также что работает многократное обновление.

### 03 вставка данных при деплое

Дополните SSDT с проект с базой Northwind версии 1.3
post deploy скриптом вставки данных для таблиц
*   `Categories`
*   `Suppliers`
*   `Products`

Можно взять данные из исходного скрипта _instnwnd.sql_
(можно брать не все данные, а первые 5-10 записей).

При этом ваш проект должен позволять накатывать данные несколько раз
(при условии, что в этих и других таблицах не появилось новых данных).